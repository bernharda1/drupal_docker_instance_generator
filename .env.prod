# PRODUCTION (public, no internal reverse-proxy by default)
# Projektpfad: /srv/prod/<project>
COMPOSER_PROJECT_NAME=infrasightsolutions/drupal
PROJECT_BASE_PATH=/srv/prod
COMPOSE_PROFILES=web-nginx,fpm,db-postgres,cache-redis,tools
CONTAINER_PREFIX=drupal_prod
TRAEFIK_PREFIX=drupal-prod

STACK_ENV=prod
EDGE_NETWORK_NAME=prod_net
TRAEFIK_DOCKER_NETWORK=proxy

# Beliebige öffentliche PROD-Domain setzen (DNS muss auf Traefik zeigen)
PUBLIC_DOMAIN=change-me-prod.example.com
TRAEFIK_ENABLE=true
TRAEFIK_ENTRYPOINT_WEB=web
TRAEFIK_ENTRYPOINT_WEBSECURE=websecure
TRAEFIK_CERTRESOLVER=le-dns
TRAEFIK_TLS_OPTIONS=default
TRAEFIK_SECURITY_MIDDLEWARES=

# Static IPv6 optional: use docker-compose.ipv6.yml or docker-compose.ipv6.reverse-proxy.yml
# WEB_IPV6_ADDRESS=2a0a:4cc0:0:2d05:1200::10
# WEB_BACKEND_IPV6_ADDRESS=2a0a:4cc0:0:2d05:1200::11
PUBLIC_BIND_ADDRESS=[::]
PUBLIC_BIND_ADDRESS_V4=127.0.0.1

REVERSE_PROXY_HOST_PORT=8088
VARNISH_HOST_PORT=6081

DRUPAL_DB_DRIVER=pgsql
DRUPAL_DB_HOST=db-postgres
DRUPAL_DB_PORT=5432
DRUPAL_DB_NAME=drupal
DRUPAL_DB_USER=drupal
DRUPAL_DB_PASSWORD=change-me-prod
DRUPAL_REDIS_HOST=redis

POSTGRES_DB=drupal
POSTGRES_USER=drupal
POSTGRES_PASSWORD=change-me-prod

PHPMYADMIN_DOMAIN=phpmyadmin.change-me-prod.example.com

MAILPIT_SMTP_HOST_PORT=1025
MAILPIT_DOMAIN=mailpit.change-me-prod.example.com

# Optional überschreiben, falls mehrere Domains benötigt werden:
# DRUPAL_TRUSTED_HOST_PATTERNS=^localhost$,^127\\.0\\.0\\.1$,^change-me-prod\.example\.com$

FPM_MEM_LIMIT=1536m
FPM_CPUS=1.50
WEB_NGINX_MEM_LIMIT=768m
WEB_NGINX_CPUS=1.00
POSTGRES_MEM_LIMIT=1536m
POSTGRES_CPUS=1.50
REDIS_MEM_LIMIT=384m
REDIS_CPUS=0.40
COMPOSER_MEM_LIMIT=1024m
COMPOSER_CPUS=1.00
DRUSH_MEM_LIMIT=768m
DRUSH_CPUS=0.80
NODE_MEM_LIMIT=1024m
NODE_CPUS=1.00
